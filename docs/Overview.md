# Overview

所有操作都是两阶段, 先 Apply, 然后 Fsync. Apply 可能只是写到内存, 类似 write(). Fsync 才是真正的持久化.

## 最小可迁移单位

分布式系统中, 通过数据迁移(sharding)来实现分布式, 最小可迁移单位决定分布式系统的可分布性和性能. 一般的分布式系统, 最小可迁移单位是一个 Raft Group, 但是, Raft Group 以什么样的形式存在呢?

可以选择以进程的形式, 但不建议, 因为进程是操作系统管理的, 而且在实践上, 进程一般由运维人员通过执行程序的方式创建. 当然程序可以管理进程, 但更好的做法是启动一个类似容器的进程, 然后在这个容器里管理 Raft Group. 在容器内, 可以以线程的形式来运行 Raft Group, 也可以以单线程多路复用的形式管理, 取决于编程便利和逻辑上的独立性取舍.

## 关于配置中心

配置中心反映的并不是当前时刻的集群的准确状态, 因为集群的准确状态由全部节点(多数派)确定, 配置中心只能被动地接收各节点的状态上报或者主动查询. 所有对配置中心的使用, 必须基于此项基础.
